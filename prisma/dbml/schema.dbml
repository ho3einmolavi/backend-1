//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  phone String [unique, not null]
  password String [not null]
  firstname String [not null]
  lastname String [not null]
  balance Float [not null, default: 0]
  profitBalance Float [not null, default: 0]
  totalProfit Float [not null, default: 0]
  parentId String
  referId String
  role Role [not null, default: 'USER']
  isDisabled Boolean [not null, default: false]
  isParentDisabled Boolean [not null, default: false]
  maxRechargeDiscountPercent Float
  parent User
  children User [not null]
  refer User
  referers User [not null]
  userPackage UserPackage [not null]
  payment Payment [not null]
  telegram TelegramUser
  bankCard BankCard [not null]
  file File [not null]
}

Table TelegramUser {
  id BigInt [pk]
  userId String [unique, not null]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  phone String [unique]
  firstname String [not null]
  lastname String [not null]
  username String
  bigAvatar String
  smallAvatar String
  user User [not null]
}

Table BankCard {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId String [not null]
  number String [unique, not null]
  name String [not null]
  user User [not null]
}

Table File {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  userId String [not null]
  name String [not null]
  user User [not null]
}

Table Domain {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  domain String [unique, not null]
  expiredAt DateTime [not null]
  nsState DomainState [not null, default: 'PENDING']
  arvanSslState DomainState [not null, default: 'PENDING']
  letsEncryptSsl DomainState [not null, default: 'PENDING']
  port Int
  isAutomated Boolean
  arvanId String [not null]
  serverId String [not null]
  arvan Arvan [not null]
  server Server [not null]
}

Table Arvan {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  email String [unique, not null]
  password String [not null]
  token String
  tokenExpiredAt DateTime
  nsKeys String[] [not null]
  domain Domain [not null]
}

Table Server {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  deletedAt DateTime
  type ServerCountry [not null]
  ip String [unique, not null]
  domain String [unique, not null]
  inboundId Int [not null, default: 1]
  token String [not null]
  userPackage UserPackage [not null]
  Domain Domain [not null]
  clientStat ClientStat [not null]
}

Table Package {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  deletedAt DateTime
  traffic Float [not null]
  expirationDays Float [not null]
  price Float [not null]
  userCount Int [not null]
  userPackage UserPackage [not null]
}

Table RechargePackage {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  deletedAt DateTime
  amount Float [not null]
  discountPercent Float [not null]
}

Table UserPackage {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  deletedAt DateTime
  finishedAt DateTime
  name String [not null]
  packageId String [not null]
  userId String [not null]
  serverId String [not null]
  statId String [not null]
  paymentId String
  thresholdWarningSentAt DateTime
  order String [not null, default: 'n']
  payment Payment
  package Package [not null]
  user User [not null]
  server Server [not null]
  stat ClientStat [not null]
}

Table ClientStat {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  expiryTime BigInt [not null]
  total BigInt [not null]
  down BigInt [not null]
  up BigInt [not null]
  email String [not null]
  enable Boolean [not null]
  serverId String [not null]
  flow String [not null]
  subId String [not null]
  tgId String [not null]
  limitIp Int [not null]
  server Server [not null]
  Package UserPackage [not null]
}

Table Payment {
  id String [pk]
  createdAt DateTime [default: `now()`, not null]
  updatedAt DateTime [not null]
  amount Float [not null]
  type PaymentType [not null]
  status PaymentState [not null, default: 'PENDING']
  receiptImage String
  payerId String [not null]
  profitAmount Float [not null, default: 0]
  parentProfit Float [not null, default: 0]
  payer User [not null]
  UserPackage UserPackage [not null]
}

Enum Role {
  ADMIN
  USER
}

Enum DomainState {
  PENDING
  APPLIED
}

Enum ServerCountry {
  NL
  DE
  TR
}

Enum PaymentState {
  PENDING
  APPLIED
  REJECTED
}

Enum PaymentType {
  PACKAGE_PURCHASE
  WALLET_RECHARGE
  SERVER_COST
}

Ref: User.parentId - User.id

Ref: User.referId - User.id

Ref: TelegramUser.userId - User.id

Ref: BankCard.userId > User.id

Ref: File.userId > User.id

Ref: Domain.arvanId > Arvan.id

Ref: Domain.serverId > Server.id

Ref: UserPackage.paymentId > Payment.id

Ref: UserPackage.packageId > Package.id

Ref: UserPackage.userId > User.id

Ref: UserPackage.serverId > Server.id

Ref: UserPackage.statId > ClientStat.id

Ref: ClientStat.serverId > Server.id

Ref: Payment.payerId > User.id